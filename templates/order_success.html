{% extends "base.html" %}

{% block title %}Order Successful - Shelfs{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-16">
    <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-lg shadow-xl p-8 text-center">
            <div class="mb-6">
                <i class="fas fa-check-circle text-green-500 text-6xl"></i>
            </div>
            
            <h1 class="text-3xl font-bold text-slate-900 mb-4">Order Placed Successfully!</h1>
            
            <div class="bg-slate-50 rounded-lg p-6 mb-6">
                <p class="text-slate-600 mb-2">Order ID: <span class="font-bold text-slate-900">#{{ order.id }}</span></p>
                <p class="text-slate-600 mb-2">Total Amount: <span class="font-bold text-amber-600 text-2xl">₹{{ "%.2f"|format(order.total_amount) }}</span></p>
                <p class="text-slate-600">Order Date: <span class="font-bold text-slate-900">{{ order.date.strftime('%B %d, %Y at %I:%M %p') }}</span></p>
            </div>
            
            {% if order.status == 'Approved' %}
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                <p class="text-green-800 font-medium">
                    <i class="fas fa-check-circle mr-2"></i>
                    Your order has been approved! You can start reading your books now.
                </p>
            </div>
            
            <div class="space-y-3">
                <a href="{{ url_for('my_library') }}" class="block w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 rounded-lg transition">
                    <i class="fas fa-book-open mr-2"></i>Go to My Library
                </a>
                <a href="{{ url_for('index') }}" class="block w-full bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition">
                    <i class="fas fa-store mr-2"></i>Continue Shopping
                </a>
            </div>
            
            {% elif order.status == 'Pending' %}
            <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
                <p class="text-amber-800 font-medium">
                    <i class="fas fa-clock mr-2"></i>
                    Your order is awaiting admin confirmation due to limited stock availability.
                </p>
                <p class="text-amber-700 text-sm mt-2">You'll be notified once your order is approved. Stock has been reserved for you.</p>
            </div>
            
            <div class="space-y-3">
                <a href="{{ url_for('index') }}" class="block w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 rounded-lg transition">
                    <i class="fas fa-store mr-2"></i>Continue Shopping
                </a>
            </div>
            {% endif %}
            
            <div class="mt-8 pt-6 border-t border-slate-200">
                <h3 class="font-bold text-slate-900 mb-3">Order Items:</h3>
                <div class="space-y-2">
                    {% for item in order.items %}
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-slate-700">{{ item.book.title }} <span class="text-slate-500">(x{{ item.quantity }})</span></span>
                        <span class="font-medium text-slate-900">₹{{ "%.2f"|format(item.price_at_purchase * item.quantity) }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <div class="mt-8 text-center text-slate-600">
            <p class="mb-2">
                <i class="fas fa-info-circle mr-1"></i>
                Thank you for choosing Shelfs!
            </p>
            <p class="text-sm">Questions? Contact us at support@shelfs.com</p>
        </div>
    </div>
</div>
{% endblock %}
